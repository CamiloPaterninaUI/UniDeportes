<!DOCTYPE html>

<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Registro de Estudiante - UniDeportes</title>
  <link rel="stylesheet" href="../estilos/estilos_estudiante.css" />

  <style>
    /* ===== ANIMACIONES ===== */
    @keyframes fadeInUp {
      0% { opacity: 0; transform: translateY(30px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeIn {
      0% { opacity: 0; }
      100% { opacity: 1; }
    }

    h1 {
      opacity: 0;
      animation: fadeIn 1s ease-out forwards;
      animation-delay: 0.2s;
    }

    .seccion-formulario {
      opacity: 0;
      animation: fadeInUp 0.9s ease-out forwards;
      animation-delay: 0.4s;
    }

    .btn-registrar {
      transition: all 0.3s ease;
      transform: scale(1);
    }

    .btn-registrar:hover {
      background-color: #004aad;
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(0, 74, 173, 0.3);
    }

    input:focus, select:focus {
      outline: none;
      border-color: #004aad;
      box-shadow: 0 0 8px rgba(0, 74, 173, 0.4);
      transition: 0.3s ease;
    }
  </style>

</head>

<body>
  <!-- Menú principal -->
  <nav class="menu-principal">
    <div class="logo">UniDeportes</div>
    <ul class="menu-lista">
      <li><a href="../index.html">Inicio</a></li>
      <li><a href="panel_estudiante.html" class="activo">Panel Estudiante</a></li>
      <li><a href="login_estudiante.html">Iniciar Sesión</a></li>
    </ul>
  </nav>

  <!-- Contenido principal -->

  <main class="contenido">
    <h1>Registro de Estudiante</h1>

<section class="seccion-formulario">
  <form id="form-registro" class="formulario">
    <div class="campo">
      <label for="nombre">Nombres y Apellidos:</label>
      <input type="text" id="nombre" name="nombre" required />
    </div>

    <div class="campo">
      <label for="correo">Correo institucional o Gmail:</label>
      <input type="email" id="correo" name="correo" placeholder="ejemplo@estudiantesunibague.edu.co" required />
    </div>

    <div class="campo">
      <label for="password">Contraseña:</label>
      <input type="password" id="password" name="password" minlength="6" required />
    </div>

    <div class="campo">
      <label for="codigo">Código estudiantil:</label>
      <input type="text" id="codigo" name="codigo" required />
    </div>

    <div class="campo">
      <label for="edad">Edad:</label>
      <input type="number" id="edad" name="edad" min="15" max="80" required />
    </div>

    <div class="campo">
      <label for="tipo_sangre">Tipo de sangre:</label>
      <select id="tipo_sangre" name="tipo_sangre" required>
        <option value="">Seleccione...</option>
        <option value="O+">O+</option>
        <option value="O-">O-</option>
        <option value="A+">A+</option>
        <option value="A-">A-</option>
        <option value="B+">B+</option>
        <option value="B-">B-</option>
        <option value="AB+">AB+</option>
        <option value="AB-">AB-</option>
      </select>
    </div>

    <div class="campo">
      <label for="telefono">Teléfono:</label>
      <input type="tel" id="telefono" name="telefono" required />
    </div>

    <div class="campo">
      <label for="emergencia">Contacto de emergencia:</label>
      <input type="text" id="emergencia" name="emergencia" required />
    </div>

    <div class="campo">
      <label for="activo">¿Activo en la Universidad?</label>
      <select id="activo" name="activo" required>
        <option value="">Seleccione...</option>
        <option value="Sí">Sí</option>
        <option value="No">No</option>
      </select>
    </div>

    <div class="botones">
      <button type="submit" class="btn-registrar">Registrar</button>
    </div>
  </form>
</section>


  </main>

  <footer>
    <p><strong>UNIDEPORTES</strong> - Universidad de Ibagué</p>
  </footer>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const form = document.getElementById("form-registro");

      form.addEventListener("submit", (event) => {
        event.preventDefault();

        const nombre = document.getElementById("nombre").value.trim();
        const correo = document.getElementById("correo").value.trim();
        const password = document.getElementById("password").value.trim();
        const codigo = document.getElementById("codigo").value.trim();
        const edad = document.getElementById("edad").value.trim();
        const tipo_sangre = document.getElementById("tipo_sangre").value;
        const telefono = document.getElementById("telefono").value.trim();
        const emergencia = document.getElementById("emergencia").value.trim();
        const activo = document.getElementById("activo").value;

        // === VALIDACIONES ===
        if (!nombre || !correo || !password || !codigo || !edad || !telefono || !emergencia || !tipo_sangre || !activo) {
          alert("Por favor, complete todos los campos requeridos.");
          return;
        }

        const patronCorreo = /^[a-zA-Z0-9._%+-]+@(gmail\.com|estudiantesunibague\.edu\.co)$/i;
        if (!patronCorreo.test(correo)) {
          alert("Solo se permiten correos Gmail o institucionales (@estudiantesunibague.edu.co).");
          return;
        }

        if (password.length < 6) {
          alert("La contraseña debe tener al menos 6 caracteres.");
          return;
        }

        // === CREAR OBJETO DE USUARIO ===
        const estudiante = {
          tipo: "estudiante",
          nombre,
          correo,
          password,
          codigo,
          edad,
          tipo_sangre,
          telefono,
          emergencia,
          activo,
          fecha_registro: new Date().toLocaleString(),
        };

        // Guardar en localStorage
        let lista = JSON.parse(localStorage.getItem("estudiantes") || "[]");

        // Validar duplicado
        if (lista.some(u => u.correo === correo)) {
          alert("Este correo ya está registrado. Intente con otro.");
          return;
        }

        lista.push(estudiante);
        localStorage.setItem("estudiantes", JSON.stringify(lista));
        localStorage.setItem("usuarioActivo", JSON.stringify(estudiante));

        alert("✅ Registro exitoso. Puede iniciar sesión ahora.");
        window.location.href = "login_estudiante.html";
      });
    });
  </script>

</body>
</html>
